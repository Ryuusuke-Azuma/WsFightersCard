@startuml
!define COMPONENT(name) component name
!define FRAGMENT(name) component name <<Fragment>>

package "com.mynet.kazekima.wsfighterscard" {

    COMPONENT(MainActivity)
    COMPONENT(MainNavigation)

    package "schedule" {
        FRAGMENT(ScheduleFragment)
        FRAGMENT(GamesPageFragment)
        FRAGMENT(ScoresPageFragment)
        COMPONENT(ScheduleViewModel)

        package "record" {
            FRAGMENT(RecordGameDialogFragment)
            FRAGMENT(RecordScoreDialogFragment)
            FRAGMENT(DeleteGameDialogFragment)
            FRAGMENT(DeleteScoreDialogFragment)
            COMPONENT(RecordViewModel)
        }
    }

    package "analytics" {
        FRAGMENT(AnalyticsFragment)
        FRAGMENT(SummaryPageFragment)
        FRAGMENT(DecksPageFragment)
        FRAGMENT(WeaknessPageFragment)
        COMPONENT(AnalyticsViewModel)
    }

    package "settings" {
        FRAGMENT(SettingsFragment)
        COMPONENT(SettingsViewModel)
    }

    package "profile" {
        FRAGMENT(ProfileFragment)
        COMPONENT(ProfileViewModel)
    }
}

package "Data Layer" {
    COMPONENT(FightersRepository)
    COMPONENT(FightersDatabase) <<Database>>
}

' --- Dependencies ---

MainActivity -down-> MainNavigation

MainNavigation -down-> ScheduleFragment
MainNavigation -down-> AnalyticsFragment
MainNavigation -down-> SettingsFragment
MainNavigation -down-> ProfileFragment

' --- Schedule ---
ScheduleFragment ..> ScheduleViewModel
ScheduleFragment -> GamesPageFragment : "shows in ViewPager"
ScheduleFragment -> ScoresPageFragment : "shows in ViewPager"
GamesPageFragment ..> ScheduleViewModel
ScoresPageFragment ..> ScheduleViewModel

GamesPageFragment ..> RecordGameDialogFragment : "shows"
GamesPageFragment ..> DeleteGameDialogFragment : "shows"
ScoresPageFragment ..> RecordScoreDialogFragment : "shows"
ScoresPageFragment ..> DeleteScoreDialogFragment : "shows"

RecordGameDialogFragment ..> RecordViewModel
RecordScoreDialogFragment ..> RecordViewModel
DeleteGameDialogFragment ..> RecordViewModel
DeleteScoreDialogFragment ..> RecordViewModel

' --- Analytics ---
AnalyticsFragment ..> AnalyticsViewModel
AnalyticsFragment -> SummaryPageFragment : "shows in ViewPager"
AnalyticsFragment -> DecksPageFragment : "shows in ViewPager"
AnalyticsFragment -> WeaknessPageFragment : "shows in ViewPager"

SummaryPageFragment ..> AnalyticsViewModel
DecksPageFragment ..> AnalyticsViewModel
WeaknessPageFragment ..> AnalyticsViewModel

' --- Data Layer ---
ScheduleViewModel -> FightersRepository
AnalyticsViewModel -> FightersRepository
RecordViewModel -> FightersRepository
ProfileViewModel -> FightersRepository
SettingsViewModel -> FightersRepository

FightersRepository -> FightersDatabase

@enduml
